
@inherits LayoutComponentBase

<MudThemeProvider @ref="@_mudThemeProvider" @bind-IsDarkMode="@_isDarkMode" Theme="MyCustomTheme" />
<MudDialogProvider />
<MudSnackbarProvider />

<style>
    .image-cover{
        background-image: url('_content/ChatAppShared/images/login-background.jpeg');
        background-size: cover;
        background-position: center;

    }
</style>


<MudLayout>
    <MudMainContent Class="pa-1 image-cover">
        @Body
    </MudMainContent>
</MudLayout>

@code {
    bool _drawerOpen = false;
    bool _isDarkMode = false;
    // Change the theme mode icon
    private string modeIcon => !_isDarkMode ? Icons.Filled.DarkMode : Icons.Filled.LightMode;

    // Get defaut user's browser theme mode
    private MudThemeProvider _mudThemeProvider;
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        // if (firstRender)
        // {
        //     _isDarkMode = await _mudThemeProvider.GetSystemPreference();
        //     StateHasChanged();
        // }
    }



    // Specify the app theme
    MudTheme MyCustomTheme = new MudTheme()
        {
            Palette = new Palette()
            {
                Primary = "#482ff7",
                Background = "#F4FAFB",
                Surface = "#F4FAFB",
                DrawerBackground = "#FBFDFD",
                AppbarBackground = "#482FF7",
                TextPrimary = "#000000",
                AppbarText = "#000000",
                DrawerText = "#000000",
                DrawerIcon = "#000000",
                DarkLighten = "#eaecf2",
                LinesInputs = "#000000",
                LinesDefault = "#00000055",
                ActionDefault = "#000000",
                TextSecondary = "#00000088",
                SuccessContrastText = "#000000",

            },
            PaletteDark = new Palette()
            {
                Primary = "#482ff7",
                Background = "#1a1a27",
                Surface = "#1a1a27",
                AppbarBackground = "#482FF7",
                TextPrimary = "#ffffff",
                AppbarText = "#000000",
                DrawerText = "#ffffff",
                DrawerIcon = "#ffffff",
                DrawerBackground = "#000000",
                DarkLighten = "#F5F9FF",
                LinesInputs = "#ffffff",
                LinesDefault = "#ffffff55",
                ActionDefault = Colors.Cyan.Default,
                TextSecondary = "#ffffff88",
                SuccessContrastText = "#ffffff",

            },
            LayoutProperties = new LayoutProperties()
            {
                DrawerWidthLeft = "260px",
                DrawerWidthRight = "300px",
                AppbarHeight = "100px"
            }
        };

    // Handle theme mode button click
    private void changeThemeModeClicked()
    {
        _isDarkMode = !_isDarkMode;
        StateHasChanged();
    }
}